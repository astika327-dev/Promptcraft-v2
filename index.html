<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>PromptCraft ‚Äî AI Prompt Builder</title>
  <meta name="description" content="Compose clean, structured prompts for LLMs with live preview, token estimate, and presets." />
  <style>
    /* ===== Design Tokens ===== */
    :root{
      --bg:#0b0f16; --panel:#111727; --panel-2:#0e1422;
      --text:#e6ebf5; --muted:#96a0b5; --brand:#6ea8fe; --accent:#8ef0c7;
      --danger:#ff6b6b; --ring: 2px solid color-mix(in srgb, var(--brand), #fff 10%);
      --radius:16px; --gap:14px; --shadow:0 10px 25px rgba(0,0,0,.35);
    }
    [data-theme="light"]{
      --bg:#f6f8fc; --panel:#ffffff; --panel-2:#f1f4fb;
      --text:#1a2333; --muted:#53607a; --brand:#2b73ff; --accent:#00a37a;
      --danger:#cf3636; --ring: 2px solid color-mix(in srgb, var(--brand), #000 10%);
      --shadow:0 10px 20px rgba(0,0,0,.08);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font:16px/1.55 system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial;
      color:var(--text); background:linear-gradient(180deg,var(--bg),#070a10);
      letter-spacing:.2px;
    }
    a{color:var(--brand); text-decoration:none}
    .wrap{max-width:1050px; margin:0 auto; padding:24px}
    header{
      position:sticky; top:0; z-index:10; backdrop-filter:saturate(1.3) blur(8px);
      background:linear-gradient(180deg,color-mix(in srgb, var(--panel), transparent 35%), transparent);
      border-bottom:1px solid color-mix(in srgb, var(--panel), #fff 12%);
    }
    .nav{
      display:flex; align-items:center; gap:14px; padding:12px 24px;
      max-width:1050px; margin:0 auto;
    }
    .logo{display:flex; align-items:center; gap:10px; font-weight:700}
    .dot{width:26px;height:26px;border-radius:9px;background:
      radial-gradient(120% 120% at 20% 20%, var(--brand), var(--accent));
      box-shadow:0 0 0 3px color-mix(in srgb, var(--brand), transparent 70%);
    }
    .grow{flex:1}
    .btn{
      display:inline-flex; align-items:center; gap:8px;
      background:var(--panel); color:var(--text);
      border:1px solid color-mix(in srgb, var(--panel), #fff 14%);
      padding:10px 14px; border-radius:12px; cursor:pointer;
      transition:.15s ease; box-shadow:var(--shadow);
    }
    .btn:hover{transform:translateY(-1px)}
    .btn.primary{background:linear-gradient(180deg,var(--brand),#3a65ff); color:white; border:none}
    .grid{display:grid; gap:var(--gap)}
    .cols{grid-template-columns:repeat(12,1fr)}
    .card{
      background:linear-gradient(180deg,var(--panel),var(--panel-2));
      border:1px solid color-mix(in srgb, var(--panel), #fff 10%);
      border-radius:var(--radius); box-shadow:var(--shadow);
    }
    .panel{padding:18px}
    .label{display:block; font-size:.85rem; color:var(--muted); margin:6px 0 6px}
    .input, textarea, select{
      width:100%; padding:12px 12px; border-radius:12px; color:var(--text);
      background:color-mix(in srgb, var(--panel-2), #000 6%);
      border:1px solid color-mix(in srgb, var(--panel), #fff 14%);
      outline:none;
    }
    .row{display:flex; gap:var(--gap); flex-wrap:wrap}
    .pill{display:inline-flex; align-items:center; gap:8px; padding:8px 10px;
      border-radius:999px; background:color-mix(in srgb, var(--accent), #000 70%);
      color:color-mix(in srgb, var(--accent), #000 10%); font-weight:600}
    .muted{color:var(--muted)}
    .kbd{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
      background:color-mix(in srgb, var(--panel), #fff 6%); padding:2px 6px; border-radius:6px;
      border:1px solid color-mix(in srgb, var(--panel), #fff 16%);}
    .footer{opacity:.85; padding:26px; text-align:center; color:var(--muted)}
    .tok{font-variant-numeric:tabular-nums}
    @media (max-width:880px){
      .cols{grid-template-columns:1fr}
    }
    .title{font-size:1.15rem; font-weight:700; margin:0 0 6px}
    .desc{margin:0 0 16px; color:var(--muted)}
    textarea{min-height:140px; resize:vertical}
    .hint{font-size:.85rem; color:var(--muted)}
    .right{display:flex; gap:10px; align-items:center}
    .warn{color:var(--danger)}
    .small{font-size:.9rem}
    .okay{color:var(--accent)}
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <div class="logo"><span class="dot"></span> PromptCraft</div>
      <div class="grow"></div>
      <button class="btn" id="themeToggle" title="Toggle theme">üåì Theme</button>
      <a class="btn" href="https://github.com/" target="_blank" rel="noreferrer">‚≠ê Star</a>
    </nav>
  </header>

  <main class="wrap">
    <div class="grid cols">
      <!-- Builder -->
      <section class="card panel" style="grid-column: span 7;">
        <h2 class="title">Prompt Builder</h2>
        <p class="desc">Isi parameter di bawah. Preview akan terupdate otomatis.</p>

        <div class="row">
          <div style="flex:1; min-width:240px">
            <label class="label">Goal (tujuan)</label>
            <input class="input" id="goal" placeholder="Contoh: Tulis email promosi produk baru">
          </div>
          <div style="flex:1; min-width:220px">
            <label class="label">Model</label>
            <select class="input" id="model">
              <option>GPT-4 class</option>
              <option>Claude class</option>
              <option>Open-source (LLama/ Mistral)</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div style="flex:1; min-width:220px">
            <label class="label">Tone</label>
            <select class="input" id="tone">
              <option>Friendly</option><option>Professional</option>
              <option>Conversational</option><option>Persuasive</option>
              <option>Technical</option>
            </select>
          </div>
          <div style="flex:1; min-width:220px">
            <label class="label">Style</label>
            <select class="input" id="style">
              <option>Clear & concise</option><option>Storytelling</option>
              <option>Bullet points</option><option>Step-by-step</option>
            </select>
          </div>
          <div style="flex:1; min-width:220px">
            <label class="label">Audience</label>
            <input class="input" id="audience" placeholder="Contoh: pengguna baru umur 18‚Äì30">
          </div>
        </div>

        <div class="row">
          <div style="flex:1; min-width:260px">
            <label class="label">Constraints (batasan)</label>
            <input class="input" id="constraints" placeholder="Contoh: ‚â§150 kata, sebutkan CTA di akhir">
          </div>
        </div>

        <label class="label">Context (opsional)</label>
        <textarea id="context" class="input" placeholder="Berikan konteks: deskripsi produk, target, dll."></textarea>

        <label class="label">Examples / Few-shot (opsional, 1 per baris)</label>
        <textarea id="examples" class="input" placeholder="INPUT: ‚Ä¶ ‚Üí OUTPUT: ‚Ä¶"></textarea>

        <div class="row" style="margin-top:12px">
          <button class="btn primary" onclick="applyTemplate('coldEmail')">Use Template: Cold Email</button>
          <button class="btn" onclick="applyTemplate('blogOutline')">Template: Blog Outline</button>
          <div class="grow"></div>
          <button class="btn" onclick="savePreset()">üíæ Save Preset</button>
          <select class="input" id="presetSelect" style="max-width:220px" onchange="loadPreset()">
            <option value="">Load preset‚Ä¶</option>
          </select>
        </div>
      </section>

      <!-- Preview -->
      <section class="card panel" style="grid-column: span 5;">
        <h2 class="title">Preview</h2>
        <p class="desc">Hasil prompt siap pakai untuk model pilihan.</p>

        <div class="card panel" style="background:var(--panel-2)">
          <pre id="preview" style="white-space:pre-wrap; font-family:ui-monospace,Menlo,Consolas; margin:0"></pre>
        </div>

        <div class="row" style="margin-top:12px">
          <span class="pill"><span id="words" class="tok">0</span> words</span>
          <span class="pill"><span id="tokens" class="tok">0</span> est. tokens</span>
          <span class="hint">‚âà perkiraan token kasar (kata √ó 1.3)</span>
          <div class="grow"></div>
          <button class="btn" onclick="copyPrompt()">üìã Copy</button>
          <button class="btn" onclick="downloadPrompt()">‚¨áÔ∏è Download .txt</button>
        </div>
        <p class="hint small" id="lintMsg"></p>
      </section>
    </div>
  </main>

  <footer class="footer">
    Built with ‚ù§Ô∏è by <b>PromptCraft</b>. Toggle theme via <span class="kbd">üåì</span>.
  </footer>

  <script>
    // ===== Theme toggle =====
    document.getElementById('themeToggle').addEventListener('click',()=>{
      const r=document.documentElement;
      r.setAttribute('data-theme', r.getAttribute('data-theme')==='light'?'dark':'light');
    });

    // ===== Builder logic =====
    const els = {
      goal: q('#goal'), model: q('#model'), tone: q('#tone'),
      style: q('#style'), audience: q('#audience'), constraints: q('#constraints'),
      context: q('#context'), examples: q('#examples'),
      preview: q('#preview'), words: q('#words'), tokens: q('#tokens'),
      lintMsg: q('#lintMsg'), presetSelect: q('#presetSelect')
    };
    ['input','change','keyup'].forEach(ev=>{
      document.addEventListener(ev, update);
    });

    function q(s,root=document){ return root.querySelector(s); }

    function buildPrompt(){
      const goal = els.goal.value.trim();
      const tone = els.tone.value;
      const style = els.style.value;
      const audience = els.audience.value.trim();
      const constraints = els.constraints.value.trim();
      const ctx = els.context.value.trim();
      const ex = els.examples.value.trim();

      let prompt = `You are a helpful assistant.\nModel: ${els.model.value}.\n\n`;
      if (goal) prompt += `TASK:\n- ${goal}\n\n`;
      if (audience) prompt += `AUDIENCE:\n- ${audience}\n\n`;
      prompt += `STYLE:\n- Tone: ${tone}\n- Writing style: ${style}\n\n`;
      if (constraints) prompt += `CONSTRAINTS:\n- ${constraints}\n\n`;
      if (ctx) prompt += `CONTEXT:\n${ctx}\n\n`;
      if (ex){
        prompt += `EXAMPLES (few-shot):\n`;
        ex.split('\n').forEach((line,i)=>{ if(line.trim()) prompt += `- ${line.trim()}\n`; });
        prompt += `\n`;
      }
      prompt += `OUTPUT:\n- Provide the final answer only.`;
      return prompt;
    }

    function update(){
      const text = buildPrompt();
      els.preview.textContent = text;
      const words = text.trim()? text.trim().split(/\s+/).length : 0;
      els.words.textContent = words.toLocaleString();
      els.tokens.textContent = Math.ceil(words*1.3).toLocaleString();
      lint(text);
      populatePresetsDropdown(); // once; cheap
    }

    // Simple linter: warn if goal missing or prompt too short
    function lint(text){
      let msgs=[];
      if (!els.goal.value.trim()) msgs.push('‚ö†Ô∏è Goal masih kosong ‚Äî tulis tujuan utama dulu.');
      if (text.length<60) msgs.push('‚ö†Ô∏è Prompt masih pendek, tambahkan konteks/constraint.');
      els.lintMsg.textContent = msgs.join('  ');
      els.lintMsg.className = 'hint small ' + (msgs.length? 'warn':'okay');
      if (!msgs.length) els.lintMsg.textContent = '‚úî Prompt looks good.';
    }

    // Clipboard & download
    async function copyPrompt(){
      await navigator.clipboard.writeText(els.preview.textContent);
      flash('Copied to clipboard');
    }
    function downloadPrompt(){
      const blob = new Blob([els.preview.textContent],{type:'text/plain'});
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'prompt.txt';
      a.click();
      URL.revokeObjectURL(a.href);
    }
    function flash(msg){
      const n=document.createElement('div');
      n.textContent=msg;
      n.style.cssText='position:fixed;right:16px;bottom:16px;background:var(--panel);border:1px solid color-mix(in srgb, var(--panel), #fff 14%);padding:10px 12px;border-radius:12px;box-shadow:var(--shadow);z-index:99';
      document.body.appendChild(n); setTimeout(()=>n.remove(),1400);
    }

    // Templates
    const templates = {
      coldEmail:{
        goal:'Tulis email dingin memperkenalkan jasa pembuatan website untuk UKM lokal',
        tone:'Persuasive', style:'Clear & concise', audience:'Pemilik usaha kecil yang belum punya website',
        constraints:'‚â§150 kata, ajak balas email, sebutkan benefit konkret',
        context:'Perusahaan kami: Astika Web Studio. Keunggulan: cepat, harga terjangkau, desain mobile-first.',
        examples:'INPUT: Toko kopi lokal ‚Üí OUTPUT: Email dengan highlight pemesanan online dan peta lokasi'
      },
      blogOutline:{
        goal:'Buat outline artikel blog tentang tips meningkatkan konversi landing page',
        tone:'Professional', style:'Bullet points', audience:'Founder dan marketer pemula',
        constraints:'5‚Äì7 section, sertakan CTA',
        context:'Target kata artikel 1200‚Äì1500 kata.',
        examples:'INPUT: SaaS ‚Üí OUTPUT: Outline yang menekankan social proof dan CTA jelas'
      }
    };
    function applyTemplate(name){
      const t=templates[name]; if(!t) return;
      els.goal.value=t.goal; els.tone.value=t.tone; els.style.value=t.style;
      els.audience.value=t.audience; els.constraints.value=t.constraints;
      els.context.value=t.context; els.examples.value=t.examples;
      update(); flash('Template applied');
    }

    // Presets (localStorage)
    const KEY='promptcraft.presets';
    function loadAllPresets(){ try{ return JSON.parse(localStorage.getItem(KEY)||'{}'); }catch{ return {}; } }
    function saveAllPresets(obj){ localStorage.setItem(KEY, JSON.stringify(obj)); }
    function savePreset(){
      const name = prompt('Preset name?');
      if(!name) return;
      const p = loadAllPresets();
      p[name] = {
        goal:els.goal.value, tone:els.tone.value, style:els.style.value, audience:els.audience.value,
        constraints:els.constraints.value, context:els.context.value, examples:els.examples.value,
        model:els.model.value
      };
      saveAllPresets(p); populatePresetsDropdown(); flash('Preset saved');
    }
    function populatePresetsDropdown(){
      const p = loadAllPresets();
      const sel = els.presetSelect;
      if (sel.dataset.built==='1') return; // build once
      Object.keys(p).forEach(name=>{
        const opt=document.createElement('option'); opt.value=name; opt.textContent=name; sel.appendChild(opt);
      });
      sel.dataset.built='1';
    }
    function loadPreset(){
      const name = els.presetSelect.value; if(!name) return;
      const p = loadAllPresets()[name]; if(!p) return;
      els.goal.value=p.goal; els.tone.value=p.tone; els.style.value=p.style; els.audience.value=p.audience;
      els.constraints.value=p.constraints; els.context.value=p.context; els.examples.value=p.examples; els.model.value=p.model;
      update(); flash('Preset loaded');
    }

    // First paint
    applyTemplate('coldEmail');
  </script>
</body>
</html>
